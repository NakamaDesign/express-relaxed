<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Express Relaxed</title>

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/css/bootstrap.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/simplemde/1.11.2/simplemde.min.css">
</head>
<body>
  <nav class="navbar navbar-expand-lg navbar-light bg-light">
    <a class="navbar-brand" href="#">Navbar</a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav mr-auto">
        <li class="nav-item active">
          <a class="nav-link" href="https://github.com/adam-p/markdown-here/wiki/Markdown-Cheatsheet" target="_blank">Markdown Cheatsheet</a>
        </li>
      </ul>
    </div>
  </nav>
  <div class="container-fluid my-4">
    <div class="row">
      <div class="col-6">
        <div class="row">
          <div class="col-4">
            <input type="text" class="form-control" id="name" value="Document">
          </div>
          <div class="col-4">
            <select name="theme" class="form-control" id="theme">
              <option value="paper">Paper</option>
            </select>
          </div>
          <div class="col-4">
            <button class="btn btn-primary" id="generate">Generate</button>
          </div>
        </div>
        <br>
        <textarea id="editor"></textarea>
      </div>
      <div class="col-6">
        <embed type="application/pdf" id="preview" style="width: 100%; height: 100vh; background-color: #EDEDED;"></embed>
      </div>
    </div>
  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/simplemde/1.11.2/simplemde.min.js"></script>
  <script>
    var simplemde = new SimpleMDE({
      element: document.getElementById("editor")
    })

    simplemde.value("# Relaxed document editing with web technologies\n#### Puggy McPugface, Travis C.I. Jenkins, Essie S. Hess, Zulko de Coverage\n\n> Mainstream documents editor, such as MS Office or Google Docs, are often shuned by the technical community in favor of mark-up languages (Markdown, LaTeX, etc.), more adapted to technical writings and, more generally, to the.\n\n$$x = {-b \\pm \\sqrt{b^2-4ac} \\over 2a}.$$\n\nHowever, Markdown and LaTeX make it difficult to edit documents with a\nstructure differing from the standard title-sections-paragraphs\norganization. In particular, LaTeX can be a fringing pain everytime you just\nwant to move a damn image and you can't because you don't have a PhD in\nLaTeX and you keep getting cryptic error messages because certainly\nsomewhere a bracket is missing.\n\nIn this paper we introduce a new PDF edition system ReLaXed, which takes\nadvantage of the latest web technologies to enable fast, reliable PDF\ngeneration from languages such as Pug, HTML, or CSS, and relying on Google\nChrome for rendering.\n\nFrom now on it is only placeholder text. Current CSS frameworks will make\nsure your documents will look clean and modern. Javascript frameworks can\nplot schemas, highlight code, or render maths equations the same way LaTeX\ndoes. Millions of people (and growing) are now fluent in these technologies.\nShorthand languages like Pug and SCSS are finally making it fun to write\nHTML and CSS. (Headless) web browsers can easily turn all these technologies\ninto PDF, on any platform.")

    $('#generate').click(function() {
      var name = $('#name').val()
      var theme = $('#theme').val()

      $.ajax({
        method: 'post',
        url: '/',
        data: {
          name: name,
          theme: theme,
          content: simplemde.value()
        }
      })
      .then(res => {
        $('#preview').attr('src', '/preview/' + res.name)
      })
    })
  </script>
</body>
</html>